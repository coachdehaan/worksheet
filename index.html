<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Multi-level Data Tree with Firebase</title>
  </head>
  <body>
    <h1>Multi-level Data Tree with Firebase</h1>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        // Your firebase configuration
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        databaseURL: "YOUR_DATABASE_URL",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
      };

      firebase.initializeApp(firebaseConfig);

      // Get a reference to the database service
      const database = firebase.database();

      // Define the data to be written to the tree
      const treeData = {
        level1: {
          variable1: "value1",
          variable2: "value2",
          level2: {
            variable3: "value3",
            variable4: "value4",
            level3: {
              variable5: "value5",
              variable6: "value6"
            }
          }
        }
      };

      // Create buttons for each variable in the treeData object
      const treeDiv = document.getElementById("tree");
      for (const level1Key in treeData.level1) {
        const level1Div = document.createElement("div");
        const level1Span = document.createElement("span");
        const level1Button = document.createElement("button");
        level1Span.textContent = level1Key;
        level1Button.textContent = treeData.level1[level1Key];
        level1Button.addEventListener("click", () => {
          treeData.level1[level1Key] = `updated_${treeData.level1[level1Key]}`;
          database.ref(`tree/level1/${level1Key}`).set(treeData.level1[level1Key]);
          level1Button.textContent = treeData.level1[level1Key];
          level1Button.style.backgroundColor = "green";
        });
        level1Div.appendChild(level1Span);
        level1Div.appendChild(level1Button);
        treeDiv.appendChild(level1Div);
        if (typeof treeData.level1[level1Key] === "object") {
          for (const level2Key in treeData.level1[level1Key]) {
            const level2Div = document.createElement("div");
            const level2Span = document.createElement("span");
            const level2Button = document.createElement("button");
            level2Span.textContent = level2Key;
            level2Button.textContent = treeData.level1[level1Key][level2Key];
            level2Button.addEventListener("click", () => {
              treeData.level1[level1Key][level2Key] = `updated_${treeData.level1[level1Key][level2Key]}`;
              database.ref(`tree/level1/${level1Key}/${level2Key}`).set(treeData.level1[level1Key][level2Key]);
              level2Button.textContent = treeData.level1[level1Key][level2Key];
              level2Button.style.backgroundColor = "green";
            });
            level2Div.appendChild(level2Span);
            level2Div.appendChild(level2Button);
            level1Div.appendChild(level2Div);
            if (typeof treeData.level1[level1Key][level2]
            if (typeof treeData.level1[level1Key][level2Key] === "object") {
            for (const level3Key in treeData.level1[level1Key][level2Key]) {
              const level3Div = document.createElement("div");
              const level3Span = document.createElement("span");
              const level3Button = document.createElement("button");
              level3Span.textContent = level3Key;
              level3Button.textContent = treeData.level1[level1Key][level2Key][level3Key];
              level3Button.addEventListener("click", () => {
                treeData.level1[level1Key][level2Key][level3Key] = `updated_${treeData.level1[level1Key][level2Key][level3Key]}`;
                const level3Ref = database.ref(`tree/level1/${level1Key}/${level2Key}/${level3Key}`);
                level3Ref.set(treeData.level1[level1Key][level2Key][level3Key], (error) => {
                  if (error) {
                    console.log("Failed to update level3 value:", error);
                  } else {
                    level3Button.textContent = treeData.level1[level1Key][level2Key][level3Key];
                    level3Button.style.backgroundColor = "green";
                  }
                });
              });
              level3Div.appendChild(level3Span);
              level3Div.appendChild(level3Button);
              level2Div.appendChild(level3Div);
            }
          }
        }
      }
    }

    // Read the data from the database and update the tree on the page
    database.ref("tree").on("value", (snapshot) => {
      const data = snapshot.val();
      if (data) {
        treeData.level1 = data.level1;
        updateTree();
      }
    });

    // Write the initial data to the database
    database.ref("tree").set(treeData);
  </script>
</body>
</html>
